# NeoVM 简介

## 什么是 NeoVM？

Neo 虚拟机 (NeoVM) 是一个轻量级的、基于栈的虚拟机，专为在 Neo 区块链上执行智能合约而设计。它提供安全、确定性的执行环境，确保网络中所有节点在处理交易时得到相同的结果。

## 发展历程

NeoVM 最初在 Neo 2.x 中引入，在 Neo N3 中进行了重大改进：

| 特性 | Neo Legacy | Neo N3 |
|------|-----------|--------|
| 指令集 | ~100 操作码 | 200+ 操作码 |
| 异常处理 | 有限 | 完整的 try-catch-finally |
| 调试 | 基础 | 增强的源码映射 |
| 性能 | 良好 | 优化的执行引擎 |

## 主要特点

### 1. 确定性执行

NeoVM 保证相同的合约代码和相同的输入始终产生相同的输出，无论哪个节点执行。这对区块链共识至关重要。

### 2. 沙箱环境

智能合约在完全隔离的环境中运行，无法：
- 访问文件系统
- 直接进行网络调用
- 访问系统资源

所有外部交互都通过受控的互操作服务进行。

### 3. 基于栈的架构

NeoVM 使用两个主要栈：
- **计算栈** - 用于计算和数据操作
- **备用栈** - 用于执行期间的临时存储

### 4. Gas 计量

NeoVM 中的每个操作都消耗 GAS，防止无限循环并确保公平的资源分配。
